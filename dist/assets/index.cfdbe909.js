import{R as O,u as ae,r as g,g as ie,a as le,b as N,c as ce,s as de,T as G,d as q,_ as I,e as pe,f as ue,h as ge,i as xe,j as e,k as he,l as fe,m as W,n as J,o as K,C as me,p as ye,q as Se,t as x,B as l,H as Te,v as F,w as H,x as M,y as ve,I as be,z as Ce,A as _e,D as ke,E as U,L as we,F as Oe,G as Ie,J as V,Q as r,K as m}from"./index.6253ee85.js";function Z(o=O){const s=o===O?ae:()=>g.exports.useContext(o);return function(){const{store:n}=s();return n}}const Pe=Z();function Re(o=O){const s=o===O?Pe:Z(o);return function(){return s().dispatch}}const Ae=Re();function De(o){return le("MuiLink",o)}const Le=ie("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),Be=Le,Q={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Ee=o=>Q[o]||o,Me=({theme:o,ownerState:s})=>{const c=Ee(s.color),n=N(o,`palette.${c}`,!1)||s.color,a=N(o,`palette.${c}Channel`);return"vars"in o&&a?`rgba(${a} / 0.4)`:ce(n,.4)},$e=Me,ze=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],Ne=o=>{const{classes:s,component:c,focusVisible:n,underline:a}=o,p={root:["root",`underline${q(a)}`,c==="button"&&"button",n&&"focusVisible"]};return fe(p,De,s)},Fe=de(G,{name:"MuiLink",slot:"Root",overridesResolver:(o,s)=>{const{ownerState:c}=o;return[s.root,s[`underline${q(c.underline)}`],c.component==="button"&&s.button]}})(({theme:o,ownerState:s})=>I({},s.underline==="none"&&{textDecoration:"none"},s.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},s.underline==="always"&&I({textDecoration:"underline"},s.color!=="inherit"&&{textDecorationColor:$e({theme:o,ownerState:s})},{"&:hover":{textDecorationColor:"inherit"}}),s.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Be.focusVisible}`]:{outline:"auto"}})),He=g.exports.forwardRef(function(s,c){const n=pe({props:s,name:"MuiLink"}),{className:a,color:p="primary",component:_="a",onBlur:T,onFocus:y,TypographyClasses:h,underline:k="always",variant:f="inherit",sx:d}=n,v=ue(n,ze),{isFocusVisibleRef:P,onBlur:R,onFocus:A,ref:w}=ge(),[D,S]=g.exports.useState(!1),L=xe(c,w),B=t=>{R(t),P.current===!1&&S(!1),T&&T(t)},E=t=>{A(t),P.current===!0&&S(!0),y&&y(t)},i=I({},n,{color:p,component:_,focusVisible:D,underline:k,variant:f}),u=Ne(i);return e(Fe,I({color:p,className:he(u.root,a),classes:h,component:_,onBlur:B,onFocus:E,ref:L,ownerState:i,variant:f,sx:[...Object.keys(Q).includes(p)?[]:[{color:p}],...Array.isArray(d)?d:[d]]},v))}),j=He,C={cardSx:{padding:2,paddingBottom:"0px",margin:"auto",borderRadius:"10px",height:"315px",width:"350px",backgroundColor:"rgba(255, 255, 255, 0.8)"},cardHeading:{fontSize:"25px !important",textAlign:"center",fontWeight:"bold"},inputSx:{width:"85%"},cardHeader:{fontSize:"30px !important",textAlign:"center",fontWeight:"bold"},footer:{position:"absolute",bottom:"0px",width:"100%"}};var $={},Ue=J.exports;Object.defineProperty($,"__esModule",{value:!0});var X=$.default=void 0,Ve=Ue(W()),je=K,Ge=(0,Ve.default)((0,je.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");X=$.default=Ge;var z={},qe=J.exports;Object.defineProperty(z,"__esModule",{value:!0});var Y=z.default=void 0,We=qe(W()),Je=K,Ke=(0,We.default)((0,Je.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5-8-5V6l8 5 8-5v2z"}),"Email");Y=z.default=Ke;const Ze="/assets/userlogin.6e9b817b.png",Qe="/assets/forgotPass.be75461e.png",Xe={height:"110vh",margin:0,padding:0,backgroundRepeat:"no-repeat",backgroundSize:"cover"},et=o=>{const{onLogIn:s,onLogOut:c}=o,n=Ae(),a=new me,p=ye();let _=Se();const[T,y]=g.exports.useState(!1),[h,k]=g.exports.useState(""),f=g.exports.useRef(null),[d,v]=g.exports.useState({pass:"",showPassword:!1}),[P,R]=g.exports.useState(""),[A,w]=g.exports.useState(!1),D=()=>{v({...d,showPassword:!d.showPassword})},S=async()=>{if(w(!0),h!==""&&JSON.stringify(d)!==""){const i=new FormData;i.append("user",h),i.append("pass",d.pass),await V.post("api/login",i,{"Content-Type":"text/plain"}).then(u=>{const t=u.data;if(t.success!==!1)if(t.data.length!==0){a.set("token",t.data.token),R(t.data.token),r.success("Login Successfully!!!",{position:r.POSITION.BOTTOM_RIGHT});const b=m.exports.AES.encrypt(h,"magna"),ee=m.exports.AES.encrypt(t.data.deptDesc,"magna"),te=m.exports.AES.encrypt(t.data.dept,"magna"),oe=m.exports.AES.encrypt(t.data.emp,"magna"),se=m.exports.AES.encrypt(t.data.emp_name,"magna"),ne=m.exports.AES.encrypt(t.data.BOMuser.toString(),"magna"),re=m.exports.AES.encrypt(t.data.ECRUser.toString(),"magna");a.set("logged_user",b.toString(),{path:"/"}),a.set("logged_dept",ee.toString(),{path:"/"}),a.set("Dept_logged",te.toString(),{path:"/"}),a.set("emp_logged",oe.toString(),{path:"/"}),a.set("emp_Name",se.toString(),{path:"/"}),a.set("BomUserType",ne.toString(),{path:"/"}),a.set("EcrUserType",re.toString(),{path:"/"}),n({type:"logged_user",payload:h}),n({type:"logged_dept",payload:t.data.deptDesc}),n({type:"Dept_logged",payload:t.data.dept}),n({type:"emp_logged",payload:t.data.emp}),n({type:"Bom_UserType",payload:t.data.BOMuser}),n({type:"Ecr_UserType",payload:t.data.ECRUser}),s(),_("/DASHBOARD")}else r.error(t.message,{position:r.POSITION.BOTTOM_RIGHT}),c();else r.error(t.message,{position:r.POSITION.BOTTOM_RIGHT}),v({pass:""}),k("");w(!1)}).catch(u=>{u&&console.log(u)})}else r.error("Please Enter UserName and Password !",{position:r.POSITION.BOTTOM_RIGHT}),c()},L=()=>{y(!0)},B=()=>{y(!1)},E=async()=>{if(!f.current.value=="")if(/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(f.current.value)){const u=new FormData;u.append("mail",f.current.value),await V.post("api/forgotpassword",u,{"Content-Type":"text/plain"}).then(t=>{const b=t.data;b.success!==!1?(r.success(b.message,{position:r.POSITION.BOTTOM_RIGHT}),y(!1)):r.error(b.message,{position:r.POSITION.BOTTOM_RIGHT})})}else r.error("Please Enter Valid E-Mail",{position:r.POSITION.BOTTOM_RIGHT});else r.error("Please Enter Mail",{position:r.POSITION.BOTTOM_RIGHT})};return x(l,{style:{loginStyle:Xe},children:[e(Te,{}),e(l,{sx:{height:"100vh",overflow:"hidden",justifyContent:"center",alignItems:"center",display:T===!1?"flex":"none"},children:x(F,{sx:C.cardSx,children:[e(l,{sx:{mt:-2,textAlign:"center"},children:e("img",{src:Ze,style:{width:"100px",height:"105px"},alt:"Magna_Logo"})}),e(H,{children:x(l,{children:[x(l,{children:[e(X,{sx:{textAlign:"center",fontSize:40}}),e(M,{placeholder:"Username",size:"small",sx:C.inputSx,inputProps:{autoComplete:"off"},...p,onInput:i=>k(i.target.value.trim()),onKeyDown:i=>i.key==="Enter"?S():"",value:h})]}),x(l,{sx:{mt:2},children:[e(ve,{sx:{textAlign:"center",fontSize:40}}),e(M,{placeholder:"Password",size:"small",sx:C.inputSx,...p,onInput:i=>v({pass:i.target.value}),onKeyDown:i=>i.key==="Enter"?S():"",type:d.showPassword?"text":"password",value:d.pass,InputProps:{endAdornment:e(be,{position:"end",children:e(Ce,{"aria-label":"toggle password visibility",onClick:D,children:d.showPassword?e(_e,{}):e(ke,{})})})}})]}),e(l,{textAlign:"right",sx:{pr:1,pt:1},children:e(j,{sx:{textDecoration:"none",cursor:"pointer"},onClick:L,children:"Forgot Password"})}),e(l,{textAlign:"center",children:e(U,{type:"submit",variant:"contained",sx:{mt:3,backgroundColor:"#808080"},onClick:S,children:"Login"})})]})})]})}),e(l,{sx:{height:"100vh",overflow:"hidden",justifyContent:"center",alignItems:"center",display:T===!0?"flex":"none"},children:x(F,{sx:C.cardSx,children:[e(l,{sx:{mt:-2,textAlign:"center"},children:e("img",{src:Qe,style:{width:"120px",height:"115px"},alt:"Magna_Logo"})}),x(H,{children:[e(l,{children:e(G,{sx:{textAlign:"center",fontWeight:"bold",fontSize:"25px",mt:-2},children:"Forgot Password"})}),x(l,{sx:{mt:2},children:[e(Y,{sx:{textAlign:"center",fontSize:35,width:35,ml:-1}}),e(M,{placeholder:"Email",size:"small",sx:C.inputSx,style:{marginLeft:"10px"},inputRef:f})]}),e(l,{textAlign:"right",sx:{pr:1,pt:1},children:e(j,{sx:{textDecoration:"none",cursor:"pointer"},onClick:B,children:"Go to Login"})}),e(l,{textAlign:"center",children:e(U,{type:"submit",variant:"contained",sx:{mt:3,backgroundColor:"#808080"},onClick:E,children:"Get Link"})})]})]})}),A&&e(l,{style:{position:"fixed",top:0,width:"100%"},children:e(we,{})}),e(Oe,{}),e(Ie,{})]})};export{et as default};
